import{a as f}from"./chunk-3PBVRPBV.js";import{ab as r,bb as d,cb as l,db as u,eb as m}from"./chunk-37ZJ7F5R.js";import{U as c,nc as g}from"./chunk-UGKDFCWG.js";var S=!1,C=[],p=d({providedIn:"root"},m({isLogin:S,loginCards:C}),u(t=>{let i=c(f);return{loginMethod:o=>{let s=i.accountsList().find(n=>n.email===o);s&&(sessionStorage.setItem("user_id_token","true"),sessionStorage.setItem("user_id",JSON.stringify(s)),r(t,{isLogin:!0}))},logoutMethod:()=>{sessionStorage.removeItem("user_id_token"),sessionStorage.removeItem("user_id"),r(t,{isLogin:!1}),console.log("User logged out")},addToLoginCards:(o,s)=>{let n=i.accountsList();if(!n.length)return!1;let e=n.find(a=>(a.email===o||a.name===o)&&a.password===s);return e?(r(t,{loginCards:[...t.loginCards(),e]}),!0):!1},addToLoginCardsFromLocalStorage(o){r(t,{loginCards:[...t.loginCards(),o]})},isAccountInLoginCards(o){let s=i.accountsList().some(e=>e.email===o),n=t.loginCards().some(e=>e.email===o);return s&&!n}}}),l({onInit(t){let i=sessionStorage.getItem("user_id_token"),o=JSON.parse(sessionStorage.getItem("user_id")??"null");i&&o?.email&&t.loginMethod(o.email);let s=localStorage.getItem("loginCardsAccounts");s&&JSON.parse(s).forEach(n=>{t.addToLoginCardsFromLocalStorage(n)}),g(()=>{let n=t.loginCards();localStorage.setItem("loginCardsAccounts",JSON.stringify(n))})}}));export{p as a};
