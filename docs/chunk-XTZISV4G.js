import{a as re,b as ne,c as oe}from"./chunk-GQTITXFP.js";import{a as te}from"./chunk-6NJK46TL.js";import{a as ie}from"./chunk-3A2IT7C4.js";import{a as ee}from"./chunk-3PBVRPBV.js";import{a as Y,b as H}from"./chunk-3EPGY77K.js";import"./chunk-XT7VLKWQ.js";import{$a as X,Aa as S,Ca as _,Ea as z,Fa as U,Ga as Z,Ha as L,Ia as Q,La as $,Na as W,Za as J,_a as K,c as N,g as V,ia as F,o as q,p as I,s as G,va as B,wa as m,ya as D,za as j}from"./chunk-37ZJ7F5R.js";import"./chunk-F2X3VGZZ.js";import{$ as x,Bb as v,Cb as f,Hb as k,Ib as R,Jb as T,Na as p,Nb as s,U as y,Ub as A,Za as M,_ as C,cc as O,db as d,kb as a,na as P,pb as u,tb as o,ub as r,vb as c,zb as E}from"./chunk-UGKDFCWG.js";var se=e=>{let n=e.get("password"),t=e.get("confirmPassword");return!n||!t||n.value===t.value?null:{passwordMismatch:!0}};var ae=["googleBtn"];function me(e,n){e&1&&(o(0,"p-message",12),s(1,"Name is required!"),r()),e&2&&a("styleClass"," m-auto")}function de(e,n){e&1&&(o(0,"p-message",12),s(1,"Email is required!"),r()),e&2&&a("styleClass"," m-auto")}function pe(e,n){e&1&&(o(0,"p-message",12),s(1,"Invalid email format!"),r()),e&2&&a("styleClass"," m-auto")}function ue(e,n){if(e&1&&d(0,de,2,1,"p-message",12)(1,pe,2,1,"p-message",12),e&2){let t,i=f();u((t=i.registerForm.get("email"))!=null&&t.getError("required")?0:(t=i.registerForm.get("email"))!=null&&t.getError("pattern")?1:-1)}}function ce(e,n){e&1&&(o(0,"p-message",12),s(1,"User name is required!"),r()),e&2&&a("styleClass"," m-auto")}function ge(e,n){e&1&&(o(0,"p-message",12),s(1,"User name mustn't contain spaces!"),r()),e&2&&a("styleClass"," m-auto")}function _e(e,n){if(e&1&&d(0,ce,2,1,"p-message",12)(1,ge,2,1,"p-message",12),e&2){let t,i=f();u((t=i.registerForm.get("userName"))!=null&&t.getError("required")?0:(t=i.registerForm.get("userName"))!=null&&t.getError("pattern")?1:-1)}}function fe(e,n){e&1&&(o(0,"p-message",12),s(1,"Password is required!"),r()),e&2&&a("styleClass"," m-auto")}function Ce(e,n){e&1&&(o(0,"p-message",12),s(1,"Password must contain at least 1 lowercase, 1 uppercase, 1 digit, special characters & minimum 8 characters!"),r()),e&2&&a("styleClass"," m-auto")}function xe(e,n){if(e&1&&d(0,fe,2,1,"p-message",12)(1,Ce,2,1,"p-message",12),e&2){let t,i=f();u((t=i.registerForm.get("password"))!=null&&t.getError("required")?0:(t=i.registerForm.get("password"))!=null&&t.getError("pattern")?1:-1)}}function ve(e,n){e&1&&(o(0,"p-message",12),s(1,"Confirm password is required!"),r()),e&2&&a("styleClass"," m-auto")}function he(e,n){if(e&1&&d(0,ve,2,1,"p-message",12),e&2){let t,i=f();u((t=i.registerForm.get("confirmPassword"))!=null&&t.getError("required")?0:-1)}}function ye(e,n){e&1&&(o(0,"p-message",12),s(1,"Password doesn't match!"),r()),e&2&&a("styleClass"," m-auto")}function we(e,n){e&1&&(o(0,"p-message",12),s(1,"Address field must be fill!"),r()),e&2&&a("styleClass"," m-auto")}function be(e,n){e&1&&(o(0,"p-message",12),s(1,"Street field must be fill!"),r()),e&2&&a("styleClass"," m-auto")}function Ee(e,n){e&1&&(o(0,"p-message",12),s(1,"Country field must be fill!"),r()),e&2&&a("styleClass"," m-auto")}function Fe(e,n){e&1&&(o(0,"p-message",12),s(1,"City field must be fill!"),r()),e&2&&a("styleClass"," m-auto")}function Se(e,n){if(e&1){let t=E();o(0,"div",8)(1,"div",39)(2,"div",40),c(3,"input",41)(4,"input",42)(5,"input",43)(6,"input",44),r(),o(7,"button",45),v("click",function(){let l=C(t).index,g=f();return x(g.deleteAddress(l))}),s(8,"Delete"),r()(),d(9,we,2,1,"p-message",12)(10,be,2,1,"p-message",12)(11,Ee,2,1,"p-message",12)(12,Fe,2,1,"p-message",12),r()}if(e&2){let t,i=n.index,l=f();p(),a("formGroupName",i),p(8),u((t=l.addresses.at(i).get("address"))!=null&&t.getError("required")&&((t=l.addresses.at(i).get("address"))!=null&&t.touched)?9:(t=l.addresses.at(i).get("street"))!=null&&t.getError("required")&&((t=l.addresses.at(i).get("street"))!=null&&t.touched)?10:(t=l.addresses.at(i).get("country"))!=null&&t.getError("required")&&((t=l.addresses.at(i).get("country"))!=null&&t.touched)?11:(t=l.addresses.at(i).get("city"))!=null&&t.getError("required")&&((t=l.addresses.at(i).get("city"))!=null&&t.touched)?12:-1)}}function Pe(e,n){if(e&1){let t=E();o(0,"section",46)(1,"div",47),s(2," You have unsaved changes. Are you sure you want to leave this page? "),r(),o(3,"div",48)(4,"p-button",49),v("onClick",function(){C(t);let l=f();return x(l.onUserConfirmed())}),r(),o(5,"p-button",50),v("onClick",function(){C(t);let l=f();return x(l.onUserCancelled())}),r()()()}}var le=class e{googleBtn;_googleAuthService=y(te);messageService=y(F);_registerStore=y(ee);_router=y(q);canDeActivate=P(!1);visible=!1;registerForm;onUserConfirmed=()=>{};onUserCancelled=()=>{};ngOnInit(){this.registerForm=new S({name:new _("",[m.required]),email:new _("",[m.required,m.email,m.pattern("^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+.[a-zA-Z]{2,}$")]),userName:new _("",[m.required,m.pattern("^[A-Za-z0-9]+$")]),password:new _("",[m.required,m.pattern("(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[*@%$#]).{8,}")]),confirmPassword:new _("",[m.required]),fullAddress:new $([this.createFormGroup()])},{validators:se})}ngDoCheck(){this.registerForm.touched&&!this.registerForm.valid&&this.canDeActivate.set(!0)}addAddress(){this.registerForm.controls.fullAddress.push(this.createFormGroup())}get addresses(){return this.registerForm.get("fullAddress")}deleteAddress(n){n>0&&this.addresses.removeAt(n)}createFormGroup(){return new S({address:new _("",[m.required]),street:new _("",[m.required]),country:new _("",[m.required]),city:new _("",[m.required])})}submit(){if(this.registerForm.invalid){this.registerForm.markAllAsTouched();return}let n=this.registerForm.value,t=n.fullAddress[0]||{address:"",street:"",country:"",city:""},i={sub:"",email:n.email,name:n.userName,password:n.password,passConfirm:n.confirmPassword,picture:"",isPassGoogle:!1,given_name:n.name,family_name:"",lang:"en",address:t};this._registerStore.ifEmailExist(i.email)?this.showNotify("Error","This email is already exist!"):(this._registerStore.addToAccountsList(i),this._router.navigateByUrl("/login"))}clearForm(){this.registerForm.reset()}showConfirm(n){this.visible||(this.messageService.add({key:"confirm",sticky:!0,severity:"secondary",styleClass:"backdrop-blur-lg rounded-2xl"}),this.visible=!0,this.onUserConfirmed=()=>{this.onClose(),n(!0)},this.onUserCancelled=()=>{this.onClose(),n(!1)})}onClose(){this.visible=!1,this.messageService.clear("confirm")}showNotify(n,t){this.messageService.add({severity:"secondary",summary:n,detail:t})}ngAfterViewInit(){this._googleAuthService.InitiateGoogleAccount(this.googleBtn)}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=M({type:e,selectors:[["app-register"]],viewQuery:function(t,i){if(t&1&&k(ae,7),t&2){let l;R(l=T())&&(i.googleBtn=l.first)}},features:[A([F])],decls:72,vars:9,consts:[["googleBtn",""],["headless",""],[1,"register"],[1,"register__bg"],[1,"register__container","flex","flex-column","gap-2"],[1,"register__title"],[1,"register__subtitle"],[1,"flex","flex-column","gap-2",3,"ngSubmit","formGroup"],[1,"flex","flex-column","gap-2"],[1,"flex","justify-content-center","align-items-center"],["for","name",1,"w-3","text-left"],["type","text","pInputText","","id","name","formControlName","name","placeholder","Name",1,"w-9"],["variant","outlined","severity","error",3,"styleClass"],["for","email",1,"w-3","text-left"],["type","email","pInputText","","id","email","formControlName","email","placeholder","Email@gmail.com",1,"w-9"],["for","user",1,"w-3","text-left"],["type","text","pInputText","","id","user","formControlName","userName","placeholder","User Name",1,"w-9"],["for","pass",1,"w-3","text-left"],["type","password","pInputText","","id","pass","formControlName","password","placeholder","Password",1,"w-9"],["for","confirmPass",1,"w-3","text-left"],["type","password","pInputText","","id","confirmPass","formControlName","confirmPassword","placeholder","Confirm Password",1,"w-9"],["formArrayName","fullAddress",1,"flex","flex-column","gap-2"],[1,"flex","justify-content-between","align-items-center"],[1,"w-3","text-left"],["pButton","","type","button",1,"w-6","font-bold",3,"click"],["class","flex flex-column gap-2",4,"ngFor","ngForOf"],[1,"buttons","flex","gap-2","w-10","m-auto"],["pButton","",1,"w-6","font-bold",3,"disabled"],[1,"social-logins"],["align","center","type","solid"],[1,"flex","justify-content-center","align-items-center","w-12","gap-5"],[1,"social-icons","w-5","flex","justify-content-center"],[1,"register__divider"],[1,"flex","justify-content-center","w-5"],[1,"login","font-medium"],["routerLink","/login",1,"text-red-500","font-bold","underline"],[1,"card","flex","justify-center","border-0"],["position","top-center","key","confirm",3,"onClose","baseZIndex"],[1,"card","flex","justify-center","gap-2"],[1,"flex","gap-2",3,"formGroupName"],[1,"w-10","flex","gap-1"],["type","text","pInputText","","placeholder","Building","id","address","formControlName","address",1,"w-3"],["type","text","pInputText","","placeholder","Street","id","street","formControlName","street",1,"w-3"],["type","text","pInputText","","placeholder","Country","id","country","formControlName","country",1,"w-3"],["type","text","pInputText","","placeholder","City","id","city","formControlName","city",1,"w-3"],["type","button","pButton","",1,"w-2","p-button-danger","font-bold","my-add-dark:border-0",3,"click"],[1,"flex","flex-column","p-4","gap-4","w-full","rounded-xl"],[1,"mb-3"],[1,"register__toast-btns","w-full","flex","gap-2","justify-content-center"],["severity","contrast","label","Confirm?","size","small",3,"onClick"],["severity","danger","label","Cancel","size","small",3,"onClick"]],template:function(t,i){if(t&1){let l=E();o(0,"div",2),c(1,"div",3),o(2,"div",4)(3,"h1",5),s(4,"Register"),r(),o(5,"p",6),s(6,"Welcome with us!"),r(),o(7,"form",7),v("ngSubmit",function(){return C(l),x(i.submit())}),o(8,"div",8)(9,"div",9)(10,"label",10),s(11,"Name"),r(),c(12,"input",11),r(),d(13,me,2,1,"p-message",12),r(),o(14,"div",8)(15,"div",9)(16,"label",13),s(17,"Email"),r(),c(18,"input",14),r(),d(19,ue,2,1),r(),o(20,"div",8)(21,"div",9)(22,"label",15),s(23,"User Name"),r(),c(24,"input",16),r(),d(25,_e,2,1),r(),o(26,"div",8)(27,"div",9)(28,"label",17),s(29,"Password"),r(),c(30,"input",18),r(),d(31,xe,2,1),r(),o(32,"div",8)(33,"div",9)(34,"label",19),s(35,"Confirm Password"),r(),c(36,"input",20),r(),d(37,he,1,1)(38,ye,2,1,"p-message",12),r(),o(39,"div",21)(40,"div",22)(41,"label",23),s(42,"Address"),r(),o(43,"button",24),v("click",function(){return C(l),x(i.addAddress())}),s(44,"Add new address"),r()(),d(45,Se,13,2,"div",25),r(),o(46,"div",26)(47,"button",27),s(48,"Register"),r(),o(49,"button",24),v("click",function(){return C(l),x(i.clearForm())}),s(50,"Clear"),r()()(),o(51,"div",28)(52,"p-divider",29)(53,"b"),s(54,"Or"),r()(),o(55,"div",30)(56,"div",31),c(57,"div",null,0),r(),c(59,"div",32),o(60,"div",33)(61,"p",34),s(62,"Already have an account! "),o(63,"strong")(64,"a",35),s(65,"Login"),r()()()()()()()(),o(66,"div",36)(67,"p-toast",37),v("onClose",function(){return C(l),x(i.onClose())}),d(68,Pe,6,0,"ng-template",null,1,O),r()(),o(70,"div",38),c(71,"p-toast"),r()}if(t&2){let l,g,w,b,h;p(7),a("formGroup",i.registerForm),p(6),u((l=i.registerForm.get("name"))!=null&&l.touched&&((l=i.registerForm.get("name"))!=null&&l.errors)?13:-1),p(6),u((g=i.registerForm.get("email"))!=null&&g.touched&&((g=i.registerForm.get("email"))!=null&&g.errors)?19:-1),p(6),u((w=i.registerForm.get("userName"))!=null&&w.touched&&((w=i.registerForm.get("userName"))!=null&&w.errors)?25:-1),p(6),u((b=i.registerForm.get("password"))!=null&&b.touched&&((b=i.registerForm.get("password"))!=null&&b.errors)?31:-1),p(6),u((h=i.registerForm.get("confirmPassword"))!=null&&h.touched&&((h=i.registerForm.get("confirmPassword"))!=null&&h.errors)?37:!((h=i.registerForm.get("confirmPassword"))!=null&&h.errors)&&(i.registerForm.errors!=null&&i.registerForm.errors.passwordMismatch)?38:-1),p(8),a("ngForOf",i.addresses.controls),p(2),a("disabled",!i.registerForm.valid),p(20),a("baseZIndex",5e3)}},dependencies:[V,N,W,z,B,D,j,U,Q,Z,L,G,I,ne,re,oe,ie,X,J,K,H,Y],styles:["[_nghost-%COMP%]{display:block;min-height:100vh;padding:2rem}[_nghost-%COMP%]   .register[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;min-height:100vh;display:flex;background-image:url(/imgs/login-background.jpeg);background-size:cover;background-position:center;background-repeat:repeat-y}[_nghost-%COMP%]   .register__bg[_ngcontent-%COMP%]{z-index:0;position:absolute;background-color:#00000080;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);inset:0}[_nghost-%COMP%]   .register__container[_ngcontent-%COMP%]{z-index:1;max-width:800px;width:80%;margin:auto;padding:2rem 4rem;background-color:#f9f9f9;border-radius:12px;box-shadow:0 4px 12px #0000000d;text-align:center}html.my-add-dark   [_nghost-%COMP%]   .register__container[_ngcontent-%COMP%]{background-color:#fff;color:var(--p-surface-100)}[_nghost-%COMP%]   .register__title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700;color:var(--p-red-500)}html.my-add-dark   [_nghost-%COMP%]   .register__title[_ngcontent-%COMP%]{color:var(--p-red-500)}[_nghost-%COMP%]   .register__subtitle[_ngcontent-%COMP%]{color:var(--p-surface-800);margin-bottom:1rem}html.my-add-dark   [_nghost-%COMP%]   .register__subtitle[_ngcontent-%COMP%]{color:var(--p-surface-500)}[_nghost-%COMP%]   .register__divider[_ngcontent-%COMP%]{background-color:var(--p-surface-300);height:2rem;width:1px}html.my-add-dark   [_nghost-%COMP%]   .register__divider[_ngcontent-%COMP%]{background:var(--p-surface-700)}[_nghost-%COMP%]   label[_ngcontent-%COMP%], [_nghost-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500}html.my-add-dark   [_nghost-%COMP%]   label[_ngcontent-%COMP%], html.my-add-dark   [_nghost-%COMP%]   p[_ngcontent-%COMP%]{color:var(--p-surface-800);font-weight:900}[_nghost-%COMP%]     .p-divider-content{padding-inline:1.25rem;border-radius:.4rem;border:1px solid #cecece}[_nghost-%COMP%]     .p-divider-content p{background-color:#f9f9f9}"]})};export{le as RegisterComponent};
