import{a as c}from"./chunk-3PBVRPBV.js";import{O as a,U as r,mc as l,na as n}from"./chunk-UGKDFCWG.js";var m=class i{_registerStore=r(c);_userEmail="";_account=n({sub:"",email:"",name:"",given_name:"",family_name:"",picture:"",lang:"",isPassGoogle:!1,password:""});account=l(()=>this._account());InitiateGoogleAccount(e){this._userEmail=localStorage.getItem("google_user_email")||"",google.accounts.id.initialize({client_id:"804385190541-frppfrmi2rs5ekkj48tl4pl68e6es9mu.apps.googleusercontent.com",callback:this.handleCredentialResponse.bind(this),ux_mode:"popup"}),google.accounts.id.renderButton(e.nativeElement,{theme:"outline",size:"large",type:"continue_with",shape:"pill",width:"200",locale:"en"})}handleCredentialResponse(e){let t=e.credential,o=JSON.parse(atob(t.split(".")[1]));this._userEmail=o.email,sessionStorage.setItem("user_id_token",t);let s={sub:o.sub,email:o.email,name:o.name,given_name:o.given_name,family_name:o.family_name,picture:o.picture,lang:"en",isPassGoogle:!0,password:this._registerStore.setAccountPasswordForGoogle()};this._account.set(s),sessionStorage.setItem("user_id",JSON.stringify(s)),this._registerStore.addToAccountsList(s)}GoogleSignOut(){return new Promise(e=>{let t=this._userEmail||sessionStorage.getItem("user_id");t?(google.accounts.id.disableAutoSelect(),google.accounts.id.revoke(t,()=>{console.log("Logged out from Google"),sessionStorage.removeItem("user_id_token"),sessionStorage.removeItem("user_id"),this._userEmail="",e()})):(sessionStorage.removeItem("user_id_token"),sessionStorage.removeItem("user_id"),e())})}static \u0275fac=function(t){return new(t||i)};static \u0275prov=a({token:i,factory:i.\u0275fac,providedIn:"root"})};export{m as a};
