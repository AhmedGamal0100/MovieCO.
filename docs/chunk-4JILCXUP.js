import{a as ce,b as pe,c as _e,d as ge,e as ve}from"./chunk-SBJXJX6T.js";import{a as de}from"./chunk-3A2IT7C4.js";import{b as re,c as se,d as me}from"./chunk-2QD6RHP6.js";import{a as le}from"./chunk-3PBVRPBV.js";import"./chunk-XT7VLKWQ.js";import{b as ae}from"./chunk-DBLV6GGG.js";import{$a as ee,ab as u,bb as te,cb as ie,db as ne,eb as oe,g as q,ia as R,k as K,ma as X,o as S}from"./chunk-37ZJ7F5R.js";import"./chunk-F2X3VGZZ.js";import{$ as F,Bb as b,Cb as x,Fb as G,Ja as I,Na as a,Nb as s,O as B,Ob as g,Pb as k,Qb as Y,U as m,Ub as H,Za as M,_ as V,db as v,e as C,ka as Z,kb as _,na as p,nc as h,pb as f,rb as O,sb as P,tb as o,ub as r,vb as d,zb as Q}from"./chunk-UGKDFCWG.js";var w=class t{_http=m(K);headers={headers:{accept:"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiJiZGQxMGQyYjhmNTJiYzBhNTMyMGQ1YzlkODhiZDFmZiIsIm5iZiI6MTU5Mjc1NTkwMS44MjgsInN1YiI6IjVlZWY4NmJkZWQyYWMyMDAzNTlkNGM4NiIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.NT77KLEZLjsgTMnyjJQBWADPa_t_7ydLLbvEABTxbwM"}};getDetailedMovie(e=1278950,i="en_US"){return this._http.get(`https://api.themoviedb.org/3/movie/${e}?language=${i}`,this.headers)}getDetailedReviewMovie(e=1278950,i="en_US",n=1){return this._http.get(`https://api.themoviedb.org/3/movie/${e}/reviews?language=${i}&page=${n}`,this.headers)}getDetailedRecommendations(e=1278950,i="en_US",n=1){return this._http.get(`https://api.themoviedb.org/3/movie/${e}/recommendations?language=${i}&page=${n}`,this.headers)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=B({token:t,factory:t.\u0275fac,providedIn:"root"})};var T=new C,j=new C,E=new C,y=te({providedIn:"root"},oe({detailedMovie:null,detailedReview:[],detailedRecommendations:[],id:0,lang:"en-US",page:1}),ne(t=>({setLanguage(e){u(t,{lang:e})},setId(e){u(t,{id:e})},setPage(e){u(t,{page:e})}})),ie({onInit(t){let e=m(w);h(()=>{let i=t.id(),n=t.lang(),c=t.page();i&&(T.unsubscribe(),T=e.getDetailedMovie(i,n).subscribe({next:l=>{u(t,{detailedMovie:l})},error:l=>console.error("Failed to load movie details",l)}),j.unsubscribe(),j=e.getDetailedReviewMovie(i,n,c).subscribe({next:l=>{u(t,{detailedReview:l.results})},error:l=>console.error("Failed to load reviews",l)}),E.unsubscribe(),E=e.getDetailedRecommendations(i,n,c).subscribe({next:l=>{u(t,{detailedRecommendations:l.results})},error:l=>console.error("Failed to load recommendations",l)}))})},onDestroy(){T.unsubscribe(),j.unsubscribe(),E.unsubscribe()}}));function be(t,e){if(t&1){let i=Q();o(0,"button",5),b("click",function(){let c=V(i).$implicit,l=x();return F(l.routeToDetails(c))}),o(1,"div"),d(2,"app-home-cards",6),r()()}if(t&2){let i=e.$implicit;a(2),_("movieCardObj",i)}}var D=class t{_apiDetailsStore=m(y);_router=m(S);movieCardObjs=p([]);responsiveOptions;constructor(){h(()=>{let e=this._apiDetailsStore.id(),i=this._apiDetailsStore.detailedRecommendations();e&&i?.length?this.movieCardObjs.set(i):this.movieCardObjs.set([])})}ngOnInit(){this.responsiveOptions=[{breakpoint:"1440px",numVisible:6,numScroll:1},{breakpoint:"1199px",numVisible:6,numScroll:1},{breakpoint:"767px",numVisible:4,numScroll:1},{breakpoint:"575px",numVisible:2,numScroll:1}]}routeToDetails(e){this._router.navigateByUrl("/home/details/"+e.id)}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=M({type:t,selectors:[["app-detail-similar-slider"]],decls:7,vars:6,consts:[[1,"cards-slider"],[1,"cards-slider__container"],[1,"cards-slider__title"],[3,"value","numVisible","numScroll","showIndicators","circular","responsiveOptions"],["pTemplate","item"],[3,"click"],[3,"movieCardObj"]],template:function(i,n){i&1&&(o(0,"section",0)(1,"section",1)(2,"div",2)(3,"h2"),s(4,"Recommended for you"),r()(),o(5,"p-carousel",3),v(6,be,3,1,"ng-template",4),r()()()),i&2&&(a(5),_("value",n.movieCardObjs())("numVisible",6)("numScroll",2)("showIndicators",!1)("circular",!0)("responsiveOptions",n.responsiveOptions))},dependencies:[se,me,ee,X],styles:["[_nghost-%COMP%]   .cards-slider[_ngcontent-%COMP%]   .cards-slider__container[_ngcontent-%COMP%]{padding-block:1rem 3rem}[_nghost-%COMP%]   .cards-slider[_ngcontent-%COMP%]   .cards-slider__title[_ngcontent-%COMP%]{padding-inline:3rem;margin-bottom:1rem}[_nghost-%COMP%]   .cards-slider[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:500;display:inline;transition:.5s;font-size:2rem;text-decoration:underline}html.my-add-dark   [_nghost-%COMP%]   .cards-slider[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--p-surface-100)}[_nghost-%COMP%]   .cards-slider[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:hover{color:var(--p-surface-700)}html.my-add-dark   [_nghost-%COMP%]   .cards-slider[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:hover{color:var(--p-surface-500)}[_nghost-%COMP%]   .cards-slider[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:0;border:0}"]})};var z=(t,e)=>e.id;function Ce(t,e){t&1&&d(0,"i",10)}function Me(t,e){t&1&&d(0,"i",11)}function Oe(t,e){t&1&&(o(0,"h4",18),s(1,"R"),r())}function Pe(t,e){if(t&1&&(o(0,"div"),s(1),r()),t&2){let i=e.$implicit;a(),g(i.name)}}function xe(t,e){if(t&1&&(o(0,"li"),s(1),r()),t&2){let i=e.$implicit;a(),g(i.name)}}function Se(t,e){if(t&1&&(o(0,"p-accordion-panel",29)(1,"p-accordion-header"),s(2),r(),o(3,"p-accordion-content")(4,"p",32),s(5),r()()()),t&2){let i=e.$implicit,n=e.$index;_("value",i.id),a(2),Y("- Review ",n,": ",i.author,""),a(3),g(i.content)}}function we(t,e){if(t&1&&(o(0,"p-accordion",29),O(1,Se,6,4,"p-accordion-panel",29,z),r()),t&2){let i=x();_("value",0),a(),P(i.movieReviews())}}function ye(t,e){t&1&&(o(0,"h3",30),s(1,"No Available Reviews"),r())}function De(t,e){t&1&&d(0,"app-detail-similar-slider")}var he=class t{constURL="https://image.tmdb.org/t/p/w500";_apiDetailsStore=m(y);_apiStore=m(ae);_registerStore=m(le);_messageService=m(R);_notificationStore=m(re);router=m(S);id=Z();movieDetails=p(null);movieReviews=p([]);movieRecommendations=p(0);isWishlisted=p(!1);isLoggedIn=p(!1);getBackdropUrl=p("");getPosterUrl=p("");sampleReview=p("");constructor(){h(()=>{let e=this._apiDetailsStore.detailedMovie();if(!this.id()){this.router.navigate(["/home"]);return}if(this._apiDetailsStore.setId(this.id()),this._apiDetailsStore.setLanguage(this._apiStore.lang()||"en-US"),this._apiDetailsStore.setPage(1),!e)return;this.movieDetails.set(e),this.sampleReview.set(e.overview),this.getBackdropUrl.set(this.constURL+e.backdrop_path),this.getPosterUrl.set(this.constURL+e.poster_path),this.movieReviews.set(this._apiDetailsStore.detailedReview()),this.movieRecommendations.set(this._apiDetailsStore.detailedRecommendations().length);let i=sessionStorage.getItem("user_id");if(i){this.isLoggedIn.set(!0);let n=JSON.parse(i);this.isWishlisted.set(n.wishList?.movies?.some(c=>c.id==e.id)??!1)}else this.isLoggedIn.set(!1),this.isWishlisted.set(!1)})}goBack(){this.router.navigate(["/home"])}formattedVoteAverage(){return(this.movieDetails()?.vote_average??0).toFixed(1)+"/10"}toggleWishlist(){if(!this.isLoggedIn()){this.showNotify("Login Required","Please login first to use the wishlist feature");return}this.isWishlisted.set(!this.isWishlisted()),this._registerStore.toggleMovieWishlist(this.movieDetails());let e=this.isWishlisted()?"added to":"removed from";this.showNotify("Watch List Updated",`${this.movieDetails()?.title} was ${e} your watch list`),this._notificationStore.pushNotification(`Watch List Updated: ${this.movieDetails()?.title} was ${e} your watch list`)}showNotify(e,i){this._messageService.add({severity:"secondary",summary:e,detail:i})}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=M({type:t,selectors:[["app-details"]],inputs:{id:[1,"id"]},features:[H([R])],decls:48,vars:13,consts:[[1,"movie-details"],[1,"movie-details__container","w-12","flex"],[1,"movie-details__bg"],[1,"movie-details__banner"],[1,""],["alt","Backdrop",1,"backdrop",3,"src"],[1,"movie-details__action-buttons"],[1,"movie-details__back-btn",3,"click"],[1,"pi","pi-arrow-left"],[3,"click"],[1,"pi","pi-heart"],[1,"pi","pi-heart-fill"],[1,"movie-details__poster","w-4"],[1,"movie-details__poster-img"],[3,"src","alt"],[1,"movie-details__tab-content","w-4","flex","flex-column","gap-2"],[1,"movie-details__title"],[1,"flex","align-items-center","mb-3","gap-2"],[1,"movie-details__adult"],[1,"movie-details__date"],[1,"flex","gap-2","align-items-center","border-1","px-2","py-1","border-round-lg","bg-white"],[1,"movie-details__rate","text-gray-900"],[1,"pi","pi-star-fill","text-gray-900"],[1,"movie-details__genres"],[1,"py-1"],[1,"text-lg"],[1,"text-2xl","mb-2"],[1,"movie-details__production"],[1,"movie-details__reviews","w-4","p-5","flex","flex-column","jutify-content-center","align-items-center"],[3,"value"],[1,"movie-details__reviews-no","w-full"],[1,"card","flex","justify-center","gap-2","text-2xl","toast"],[1,"m-0"]],template:function(i,n){if(i&1&&(o(0,"div",0)(1,"div",1),d(2,"div",2),o(3,"div",3)(4,"div",4),d(5,"img",5),r()(),o(6,"div",6)(7,"button",7),b("click",function(){return n.goBack()}),d(8,"i",8),r(),o(9,"button",9),b("click",function(){return n.toggleWishlist()}),v(10,Ce,1,0,"i",10)(11,Me,1,0,"i",11),r()(),o(12,"div",12)(13,"div",13),d(14,"img",14),r()(),o(15,"div",15)(16,"h1",16),s(17),r(),o(18,"div",17),v(19,Oe,2,0,"h4",18),o(20,"h4",19),s(21),r(),o(22,"div",20)(23,"h4",21),s(24),r(),d(25,"i",22),r()(),o(26,"div",23),O(27,Pe,2,1,"div",null,z),r(),o(29,"div",24)(30,"h4",25),s(31),r()(),o(32,"p"),s(33),r(),o(34,"p"),s(35),r(),o(36,"div")(37,"h4",26),s(38,"Production Companies"),r(),o(39,"ul",27),O(40,xe,2,1,"li",null,z),r()()(),o(42,"div",28),v(43,we,3,1,"p-accordion",29)(44,ye,2,0,"h3",30),r()(),v(45,De,1,0,"app-detail-similar-slider"),o(46,"div",31),d(47,"p-toast"),r()()),i&2){let c,l,N,A,U,$,W,L,J;a(5),_("src",n.getBackdropUrl(),I),a(5),f(n.isWishlisted()?11:10),a(4),G("alt",(c=n.movieDetails())==null?null:c.title),_("src",n.getPosterUrl(),I),a(3),g((l=n.movieDetails())==null?null:l.title),a(2),f((N=n.movieDetails())!=null&&N.adult?19:-1),a(2),g((A=n.movieDetails())==null?null:A.release_date),a(3),k(" ",n.formattedVoteAverage(),"/10"),a(3),P((U=n.movieDetails())==null?null:U.genres),a(4),k("Episode Time: ",($=n.movieDetails())==null?null:$.runtime," min"),a(2),g((W=n.movieDetails())==null?null:W.tagline),a(2),g((L=n.movieDetails())==null?null:L.overview),a(5),P((J=n.movieDetails())==null?null:J.production_companies),a(3),f(n.movieReviews().length>0?43:44),a(2),f(n.movieRecommendations()>0?45:-1)}},dependencies:[q,de,ve,ge,ce,pe,_e,D],styles:["[_nghost-%COMP%]   .movie-details[_ngcontent-%COMP%]{position:relative;background-color:#121212;color:#fff}[_nghost-%COMP%]   .movie-details__container[_ngcontent-%COMP%]{position:relative;color:#fff;z-index:2;min-height:90vh}[_nghost-%COMP%]   .movie-details__bg[_ngcontent-%COMP%]{z-index:1;position:absolute;background-color:#00000080;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);inset:0}[_nghost-%COMP%]   .movie-details__banner[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden}[_nghost-%COMP%]   .movie-details__banner[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;filter:brightness(.5)}[_nghost-%COMP%]   .movie-details__action-buttons[_ngcontent-%COMP%]{position:absolute;top:0;right:.5rem;padding:1rem;z-index:5;display:flex;flex-direction:column;gap:.5rem}[_nghost-%COMP%]   .movie-details__action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;margin-left:.5rem;height:3rem;width:3rem;background-color:var(--p-red-500);color:#fff;border-radius:50%;padding:.5rem 1rem;border:none;cursor:pointer}[_nghost-%COMP%]   .movie-details__action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.1rem}[_nghost-%COMP%]   .movie-details__action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--p-red-600)}[_nghost-%COMP%]   .movie-details__poster[_ngcontent-%COMP%]{position:relative;border-radius:10px;z-index:3;display:flex;justify-content:center;align-items:center}[_nghost-%COMP%]   .movie-details__poster[_ngcontent-%COMP%]   .movie-details__poster-img[_ngcontent-%COMP%]{width:80%;overflow:hidden;border-radius:10px}[_nghost-%COMP%]   .movie-details__poster[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;border-radius:10px}[_nghost-%COMP%]   .movie-details__tab-content[_ngcontent-%COMP%]{position:relative;z-index:3;padding:1rem;background-color:#000000b3;padding-block:2rem}[_nghost-%COMP%]   .movie-details__tab-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:1rem;font-size:1.5rem;font-weight:700}[_nghost-%COMP%]   .movie-details__tab-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1rem;line-height:1.5}[_nghost-%COMP%]   .movie-details__tab-content[_ngcontent-%COMP%]{text-align:center;display:flex;flex-direction:column;align-items:center;justify-content:center;padding-inline:3rem}[_nghost-%COMP%]   .movie-details__tab-content[_ngcontent-%COMP%]   .movie-details__date[_ngcontent-%COMP%]{color:#ccc;font-size:1.2rem;font-weight:300}[_nghost-%COMP%]   .movie-details__tab-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1rem;line-height:1.5;color:#ccc;font-size:1.1rem}[_nghost-%COMP%]   .movie-details__tab-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3.5rem;margin-bottom:.5rem;text-decoration:underline}[_nghost-%COMP%]   .movie-details__tab-content[_ngcontent-%COMP%]   .movie-details__overview[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:1rem}[_nghost-%COMP%]   .movie-details__tab-content[_ngcontent-%COMP%]   .movie-details__genres[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap;justify-content:center}[_nghost-%COMP%]   .movie-details__tab-content[_ngcontent-%COMP%]   .movie-details__genres[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:fit-content;font-size:1rem;color:#fff;margin-bottom:.5rem;background-color:#ffffff80;padding:.5rem 1rem;border-radius:5px}[_nghost-%COMP%]   .movie-details__tab-content[_ngcontent-%COMP%]   .movie-details__production[_ngcontent-%COMP%]{list-style-type:circle;display:flex;flex-direction:column;gap:.5rem}[_nghost-%COMP%]   .movie-details__tab-content[_ngcontent-%COMP%]   .movie-details__production[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-align:left;font-size:1.2rem;color:#ccc}[_nghost-%COMP%]   .movie-details__reviews[_ngcontent-%COMP%]{position:relative;z-index:3;max-height:100%;justify-content:center}[_nghost-%COMP%]   .movie-details__reviews-no[_ngcontent-%COMP%]{text-align:center;width:fit-content;color:#ccc;font-size:1.5rem;background-color:#000000b3;padding-block:1rem;border-radius:10px}[_nghost-%COMP%]     p-accordion-panel .p-accordion-panel{max-height:500px}[_nghost-%COMP%]     p-accordion-panel p{max-height:300px;overflow-y:scroll;padding-block:1rem}.toast[_ngcontent-%COMP%]{position:relative;z-index:10;background-color:#000000b3}@media (max-width: 576px){.movie-details__container[_ngcontent-%COMP%]{display:flex;flex-direction:column}}"]})};export{he as detailsComponent};
